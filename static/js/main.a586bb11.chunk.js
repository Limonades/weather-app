(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/loader.0315fe01.gif"},function(e,t,a){e.exports=a(39)},,,,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),s=a.n(c),l=(a(15),a(18),a(20),a(23),a(25),a(1)),i=a(2),o=a(4),u=a(3),m=a(5),d=(a(27),a(8)),h=a.n(d),f=function(e,t){return fetch(e,t).then(function(e){if(200===e.status)return e.json();throw new Error(e.statusText)})},w="https://api.weatherbit.io/v2.0//forecast/daily",v="8fab1e8c72554b01807ac34da3e2cbfc",g=a(9),p=a.n(g),k=function(){return r.a.createElement("img",{style:{width:"".concat(100,"px")},src:p.a,alt:"loader"})},b=(a(34),function(e){var t,a=function(e){return"icon wi ".concat(e)};switch(e){case"t01d":case"t02d":case"t03d":t=a("wi-day-thunderstorm");break;case"t01n":case"t02n":case"t03n":t=a("wi-night-alt-thunderstorm");break;case"t04d":case"t05d":t=a("wi-day-lightning");break;case"t04n":case"t05n":t=a("wi-night-lightning");break;case"d01d":case"d02d":case"d03d":t=a("wi-day-sleet");break;case"d01n":case"d02n":case"d03n":t=a("wi-night-alt-sleet");break;case"r01d":case"r02d":case"r01n":case"r02n":case"f01d":case"f01n":case"r04d":case"r06d":case"u00d":case"u00n":t=a("wi-rain");break;case"r03d":case"r03n":t=a("wi-day-rain-wind");break;case"r05d":t=a("wi-day-showers");break;case"r05n":case"r06n":t=a("wi-night-alt-showers");break;case"s01d":case"s04d":t=a("wi-day-snow");break;case"s01n":case"s04n":t=a("wi-night-alt-snow");break;case"s02d":case"s02n":case"s03d":case"s03n":t=a("wi-snow-wind");break;case"s05d":case"s05n":t=a("wi-cloudy-gusts");break;case"s06d":case"s06n":t=a("wi-snow");break;case"a01d":case"a02d":case"a03d":case"a04d":case"a05d":case"a06d":t=a("wi-day-fog");break;case"a01n":case"a02n":case"a03n":case"a04n":case"a05n":case"a06n":t=a("wi-night-fog");break;case"c01d":t=a("wi-day-sunny");break;case"c01n":t=a("wi-night-clear");break;case"c02d":case"c03d":t=a("wi-day-cloudy");break;case"c02n":case"c03n":t=a("wi-night-alt-cloudy");break;case"c04d":t=a("wi-day-cloudy-high");break;case"c04n":t=a("wi-night-alt-cloudy-high");break;default:t="N/A"}return t}),y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).defineDay=function(e){switch(new Date(1e3*e).getDay()){case 0:return"S";case 1:return"M";case 2:return"T";case 3:return"W";case 4:return"T";case 5:return"F";case 6:return"S";default:console.log("error")}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.weekTemp;return r.a.createElement("div",{className:"week__week"},r.a.createElement("div",{className:"week__day-wrap"},t.slice(1,8).map(function(t,a){return r.a.createElement("div",{className:"week__day",key:a},r.a.createElement("p",null,e.defineDay(t.ts)),r.a.createElement("i",{className:b(t.weather.icon)}),r.a.createElement("p",null,t.temp,"\xb0"))})))}}]),t}(r.a.Component),E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){var e=a.props,t=e.id;(0,e.removeFromFavorites)(t)},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.lat,r=t.lng,c=t.name;(0,t.getData)(n,r,c)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.favoritesWeather;return console.log(a),r.a.createElement("li",{className:"favorites__list-item"},r.a.createElement("a",{className:"favorites__list-btn text-style-2",onClick:this.handleSearch,href:"/"},r.a.createElement("p",null,t),a?r.a.createElement("span",null,a.result.data[0].temp,"\xb0"):null,r.a.createElement("button",{className:"favorites__list-remove-btn",onClick:this.handleClick,type:"button"},r.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",fill:"white"},r.a.createElement("path",{d:"M19 24h-14c-1.104 0-2-.896-2-2v-16h18v16c0 1.104-.896 2-2 2m-9-14c0-.552-.448-1-1-1s-1 .448-1 1v9c0 .552.448 1 1 1s1-.448 1-1v-9zm6 0c0-.552-.448-1-1-1s-1 .448-1 1v9c0 .552.448 1 1 1s1-.448 1-1v-9zm6-5h-20v-2h6v-1.5c0-.827.673-1.5 1.5-1.5h5c.825 0 1.5.671 1.5 1.5v1.5h6v2zm-12-2h4v-1h-4v1z"})))))}}]),t}(r.a.Component);E.defaultProps={lat:null,lng:null};var N=E,S=(a(36),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.favorites,a=e.removeFromFavorites,n=e.getData,c=e.favoritesWeather;return console.log(c),r.a.createElement("div",{className:"favorites"},r.a.createElement("h2",{className:"text-style-2"},r.a.createElement("svg",{fill:"white",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M12 5.173l2.335 4.817 5.305.732-3.861 3.71.942 5.27-4.721-2.524-4.721 2.525.942-5.27-3.861-3.71 5.305-.733 2.335-4.817zm0-4.586l-3.668 7.568-8.332 1.151 6.064 5.828-1.48 8.279 7.416-3.967 7.416 3.966-1.48-8.279 6.064-5.827-8.332-1.15-3.668-7.569z"})),"Favorites"),r.a.createElement("ul",{className:"favorites__list"},t.map(function(e,t){return r.a.createElement(N,{removeFromFavorites:a,favoritesWeather:c[t],getData:n,key:e.id,id:e.id,name:e.requestName,lat:e.lat,lng:e.lng})})))}}]),t}(r.a.Component)),_=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleSubmit=function(e){e.preventDefault()},e.handleClick=function(){var t=e.state,a=t.lat,n=t.lng,r=t.searchValue;if(""!==r)return e.getData(a,n,r);e.setState({currentTemp:null,error:"\u041d\u0435 \u0432 \u044d\u0442\u043e\u0442 \u0440\u0430\u0437, \u043f\u0435\u0442\u0443\u0448\u043e\u043a)",isLoading:!1,weekTemp:null,lat:null,lng:null})},e.handleChange=function(t){var a=e.state,n=a.lat,r=a.lng;a.requestName;e.setState({searchValue:t.target.value}),n&&r&&e.setState({lat:null,lng:null})},e.getData=function(t,a,n){return t||a||""!==n?(e.setState({searchValue:"",isLoading:!0}),t||a||""===n?void f("".concat(w,"/?lat=").concat(t,"&lon=").concat(a,"&key=").concat(v)).then(function(r){console.log(r),e.setState({currentTemp:r.data[0].temp,wind:r.data[0].wind_spd,weatherDescr:r.data[0].weather.description,wetness:r.data[0].rh,error:null,isLoading:!1,weekTemp:r.data,requestName:"".concat(n),currentWeatherIcon:r.data[0].weather.icon}),e.changeHash(t,a,n)}).catch(function(t){e.setState({error:t.message,currentTemp:null,isLoading:!1,lng:null,lat:null,weekTemp:null})}):f("".concat(w,"/forecast/daily?city=").concat(n,"&key=").concat(v)).then(function(t){console.log(t),e.setState({requestName:t.city_name,currentTemp:t.data[0].temp,error:null,isLoading:!1,weekTemp:t.data,currentWeatherIcon:t.data[0].weather.icon,weekIcons:t.data}),e.changeHash(t.lat,t.lon,t.city_name)}).catch(function(t){e.setState({error:t.message,currentTemp:null,isLoading:!1,lng:null,lat:null,weekTemp:null})})):e.setState({searchValue:"",currentTemp:null,error:"\u041d\u0435 \u0432 \u044d\u0442\u043e\u0442 \u0440\u0430\u0437, \u043f\u0435\u0442\u0443\u0448\u043e\u043a)",isLoading:!1,weekTemp:null})},e.changeHash=function(t,a,n){if(e.state.popstateEvent)return e.setState({popstateEvent:!1});var r={lat:t,lng:a,city:n},c="?lat=".concat(t,"&lng=").concat(a,"&city=").concat(n);window.history.pushState(r,"",c)},e.getUrl=function(){var t=window.location.search;if(t){var a=new URLSearchParams(t),n=a.get("lat"),r=a.get("lng"),c=a.get("city");e.getData(n,r,c)}else e.setState({currentTemp:null,weekTemp:null})},e.addToFavorites=function(){var t=e.state,a=t.lat,n=t.lng,r=t.requestName,c=t.favorites,s={id:Date.now(),lat:a,lng:n,requestName:r},l=c,i=[];if(l.forEach(function(e){i.push(e.requestName)}),e.checkFavorites(i,s.requestName)){l.unshift(s),l.length>5&&(l.length=5);var o=JSON.stringify(l);localStorage.setItem("localWeatherData",o),e.setState({favorites:l}),e.favoritesTemp(l)}},e.removeFromFavorites=function(t){var a=e.state.favorites.slice(),n=[];a.forEach(function(e){n.push(e.id)});var r=n.indexOf(t);a.splice(r,1),e.setState({favorites:a}),e.favoritesTemp(a)},e.checkFavorites=function(e,t){return-1===e.indexOf(t)},e.favoritesTemp=function(t){var a=[];t.forEach(function(e,t){a.push(new Promise(function(a,n){fetch("".concat(w,"/?lat=").concat(e.lat,"&lon=").concat(e.lng,"&key=").concat(v)).then(function(e){return e.json()}).then(function(e){a({index:t,result:e})})}))}),Promise.all(a).then(function(t){t.sort(function(e,t){return e.index-t.index}),e.setState({favoritesWeather:t})})},e.checkRequest=function(t){var a=e.state,n=a.lat,r=a.lng;if(t.geometry){var c=t.geometry.location.lat(),s=t.geometry.location.lng(),l=t.formatted_address;return e.setState({searchValue:"",lat:c,lng:s}),e.getData(c,s,l)}var i=t.name;e.getData(n,r,i)},e.getCurrentDate=function(){var e,t,a=(new Date).getDate();switch((new Date).getDay()){case 0:e="Sunday";break;case 1:e="Monday";break;case 2:e="Tuesday";break;case 3:e="Wednesday";break;case 4:e="Thursday";break;case 5:e="Friday";break;case 6:e="Saturday";break;default:console.log("error")}switch((new Date).getMonth()){case 0:t="January";break;case 1:t="February";break;case 2:t="March";break;case 3:t="April";break;case 4:t="May";break;case 5:t="Jun";break;case 6:t="July";break;case 7:t="August";break;case 8:t="September";break;case 9:t="October";break;case 10:t="November";break;case 11:t="December";break;default:console.log("error")}return"".concat(e," ").concat(t,", ").concat(a)},e.state={requestName:"",searchValue:"",currentTemp:null,wind:null,weatherDescr:null,wetness:null,error:null,isLoading:!1,weekTemp:null,lat:null,lng:null,favorites:[],popstateEvent:!1,favoritesWeather:[],currentWeatherIcon:null,weekIcons:null},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("localWeatherData"));this.getUrl(),window.addEventListener("popstate",function(){e.setState({popstateEvent:!0}),e.getUrl()}),t&&(this.setState({favorites:t}),this.favoritesTemp(t))}},{key:"componentDidUpdate",value:function(){var e=this.state.favorites,t=JSON.parse(localStorage.getItem("localWeatherData")),a=JSON.stringify(e);t&&e.length!==t.length&&localStorage.setItem("localWeatherData",a)}},{key:"render",value:function(){var e=this,t=this.state,a=t.requestName,n=t.searchValue,c=t.currentTemp,s=t.error,l=t.isLoading,i=t.weekTemp,o=t.favorites,u=t.lat,m=t.lng,d=t.favoritesWeather,f=t.wind,w=t.weatherDescr,v=t.wetness,g=t.currentWeatherIcon,p=t.weekIcons;return r.a.createElement("div",{className:l?"main-wrap loading":"main-wrap"},r.a.createElement("div",null,r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form__input-wrap"},r.a.createElement("div",null,r.a.createElement("svg",{fill:"white",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M12 0c-4.198 0-8 3.403-8 7.602 0 4.198 3.469 9.21 8 16.398 4.531-7.188 8-12.2 8-16.398 0-4.199-3.801-7.602-8-7.602zm0 14c-3.314 0-6-2.686-6-6s2.686-6 6-6 6 2.686 6 6-2.686 6-6 6z"}))),r.a.createElement(h.a,{className:"text-style-2",value:n,onChange:this.handleChange,placeholder:"Type a location ...",onPlaceSelected:function(t){console.log(t),e.checkRequest(t)},types:["(regions)"]}),r.a.createElement("button",{type:"button",onClick:this.handleClick,name:"send"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"white",width:"28",height:"28",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M23.809 21.646l-6.205-6.205c1.167-1.605 1.857-3.579 1.857-5.711 0-5.365-4.365-9.73-9.731-9.73-5.365 0-9.73 4.365-9.73 9.73 0 5.366 4.365 9.73 9.73 9.73 2.034 0 3.923-.627 5.487-1.698l6.238 6.238 2.354-2.354zm-20.955-11.916c0-3.792 3.085-6.877 6.877-6.877s6.877 3.085 6.877 6.877-3.085 6.877-6.877 6.877c-3.793 0-6.877-3.085-6.877-6.877z"}))," "))),r.a.createElement("div",{className:"current-info__wrap"},c?r.a.createElement("div",{className:"current-info"},r.a.createElement("div",{className:"current-info__title-wrap"},r.a.createElement("h1",{className:"current-info__title text-style-3"},a),r.a.createElement("button",{className:"current-info__favorite-btn",onClick:this.addToFavorites,type:"button"},r.a.createElement("svg",{fill:"white",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M12 5.173l2.335 4.817 5.305.732-3.861 3.71.942 5.27-4.721-2.524-4.721 2.525.942-5.27-3.861-3.71 5.305-.733 2.335-4.817zm0-4.586l-3.668 7.568-8.332 1.151 6.064 5.828-1.48 8.279 7.416-3.967 7.416 3.966-1.48-8.279 6.064-5.827-8.332-1.15-3.668-7.569z"})))),r.a.createElement("p",{className:"current-info__date"},this.getCurrentDate()),r.a.createElement("div",{className:"current-info__info-wrap"},r.a.createElement("div",{className:"current-info__details"},r.a.createElement("p",null,"Wind ",r.a.createElement("strong",null,f)," ms"),r.a.createElement("p",null,"Wetness ",r.a.createElement("strong",null,v,"%"))),r.a.createElement("div",{className:"current-info__icon-wrap"},r.a.createElement("i",{className:b(g)}),r.a.createElement("p",null,w)),r.a.createElement("p",{className:"current-info__temp"},c,"\xb0"))):null,s?r.a.createElement("p",{className:"error"},s):null,l?r.a.createElement("div",{className:"loader-wrap"},r.a.createElement(k,null)):null,i?r.a.createElement(y,{weekIcons:p,weekTemp:i}):null)),o.length?r.a.createElement(S,{removeFromFavorites:this.removeFromFavorites,lat:u,lng:m,favorites:o,getData:this.getData,favoritesWeather:d}):null)}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,2,1]]]);
//# sourceMappingURL=main.a586bb11.chunk.js.map